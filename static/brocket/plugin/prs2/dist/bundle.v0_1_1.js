var Export=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){/**
	 * @fileOverview
	 * @name index.js
	 * @author Gavin Coombes
	 * @license BSD-3-Clause
	 */
"use strict";var r=n(42);t.exports=r},function(t,e){"use strict";function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e){"use strict";function n(t){return"number"==typeof t&&t>-1&&t%1==0&&r>=t}var r=9007199254740991;t.exports=n},function(t,e,n){"use strict";var r=n(9),o=n(2),i=n(5),s="[object Array]",c=Object.prototype,u=c.toString,a=r(Array,"isArray"),l=a||function(t){return i(t)&&o(t.length)&&u.call(t)==s};t.exports=l},function(t,e){"use strict";function n(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&e>t}var r=/^\d+$/,o=9007199254740991;t.exports=n},function(t,e){"use strict";function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){"use strict";function r(t){return null!=t&&i(o(t))}var o=n(29),i=n(2);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&o(t)&&c.call(t,"callee")&&!u.call(t,"callee")}var o=n(6),i=n(5),s=Object.prototype,c=s.hasOwnProperty,u=s.propertyIsEnumerable;t.exports=r},function(t,e){"use strict";function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var c=Array(e+1);for(r=-1;++r<e;)c[r]=n[r];return c[e]=s,t.apply(this,c)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e,n){"use strict";function r(t,e){var n=null==t?void 0:t[e];return o(n)?n:void 0}var o=n(35);t.exports=r},function(t,e,n){"use strict";function r(t){return o(t)?t:Object(t)}var o=n(1);t.exports=r},function(t,e,n){"use strict";function r(t){return"string"==typeof t||o(t)&&c.call(t)==i}var o=n(5),i="[object String]",s=Object.prototype,c=s.toString;t.exports=r},function(t,e,n){"use strict";var r=n(36),o=n(18),i=n(28),s=i(r,o);t.exports=s},function(t,e,n){"use strict";function r(t,e){if(null==t)return!1;var n=d.call(t,e);if(!n&&!a(e)){if(e=f(e),t=1==e.length?t:o(t,i(e,0,-1)),null==t)return!1;e=p(e),n=d.call(t,e)}return n||l(t.length)&&u(e,t.length)&&(c(t)||s(t))}var o=n(22),i=n(24),s=n(7),c=n(3),u=n(4),a=n(31),l=n(2),p=n(17),f=n(33),v=Object.prototype,d=v.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";var r=n(9),o=n(6),i=n(1),s=n(32),c=r(Object,"keys"),u=c?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?s(t):i(t)?c(t):[]}:s;t.exports=u},function(t,e,n){"use strict";var r=n(40);t.exports=r},function(t,e){"use strict";function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,c,u,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),n.apply(this,c)}else if(i(n))for(c=Array.prototype.slice.call(arguments,1),a=n.slice(),o=a.length,u=0;o>u;u++)a[u].apply(this,c);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,s,c;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(c=s;c-->0;)if(n[c]===e||n[c].listener&&n[c].listener===e){o=c;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"use strict";function n(t){var e=t?t.length:0;return e?t[e-1]:void 0}t.exports=n},function(t,e){"use strict";function n(t,e){return void 0===t?e:t}t.exports=n},function(t,e,n){"use strict";function r(t,e,n){for(var r=-1,i=o(e),s=i.length;++r<s;){var c=i[r],u=t[c],a=n(u,e[c],c,t,e);(a===a?a===u:u!==u)&&(void 0!==u||c in t)||(t[c]=a)}return t}var o=n(14);t.exports=r},function(t,e,n){"use strict";function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(21),i=n(14);t.exports=r},function(t,e){"use strict";function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){"use strict";function r(t,e,n){if(null!=t){void 0!==n&&n in o(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&i>r;)t=t[e[r++]];return r&&r==i?t:void 0}}var o=n(10);t.exports=r},function(t,e){"use strict";function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},function(t,e){"use strict";function n(t,e,n){var r=-1,o=t.length;e=null==e?0:+e||0,0>e&&(e=-e>o?0:o+e),n=void 0===n||n>o?o:+n||0,0>n&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}t.exports=n},function(t,e){"use strict";function n(t){return null==t?"":t+""}t.exports=n},function(t,e,n){"use strict";function r(t,e,n){if("function"!=typeof t)return o;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,s){return t.call(e,n,r,o,i,s)}}return function(){return t.apply(e,arguments)}}var o=n(38);t.exports=r},function(t,e,n){"use strict";function r(t){return s(function(e,n){var r=-1,s=null==e?0:n.length,c=s>2?n[s-2]:void 0,u=s>2?n[2]:void 0,a=s>1?n[s-1]:void 0;for("function"==typeof c?(c=o(c,a,5),s-=2):(c="function"==typeof a?a:void 0,s-=c?1:0),u&&i(n[0],n[1],u)&&(c=3>s?void 0:c,s=1);++r<s;){var l=n[r];l&&t(e,l,c)}return e})}var o=n(26),i=n(30),s=n(8);t.exports=r},function(t,e,n){"use strict";function r(t,e){return o(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(void 0,n))})}var o=n(8);t.exports=r},function(t,e,n){"use strict";var r=n(23),o=r("length");t.exports=o},function(t,e,n){"use strict";function r(t,e,n){if(!s(n))return!1;var r=typeof e;if("number"==r?o(n)&&i(e,n.length):"string"==r&&e in n){var c=n[e];return t===t?t===c:c!==c}return!1}var o=n(6),i=n(4),s=n(1);t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=typeof t;if("string"==n&&c.test(t)||"number"==n)return!0;if(o(t))return!1;var r=!s.test(t);return r||null!=e&&t in i(e)}var o=n(3),i=n(10),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,c=/^\w*$/;t.exports=r},function(t,e,n){"use strict";function r(t){for(var e=u(t),n=e.length,r=n&&t.length,a=!!r&&c(r)&&(i(t)||o(t)),p=-1,f=[];++p<n;){var v=e[p];(a&&s(v,r)||l.call(t,v))&&f.push(v)}return f}var o=n(7),i=n(3),s=n(4),c=n(2),u=n(37),a=Object.prototype,l=a.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t){if(i(t))return t;var e=[];return o(t).replace(s,function(t,n,r,o){e.push(r?o.replace(c,"$1"):n||t)}),e}var o=n(25),i=n(3),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,c=/\\(\\)?/g;t.exports=r},function(t,e,n){"use strict";function r(t){return o(t)&&c.call(t)==i}var o=n(1),i="[object Function]",s=Object.prototype,c=s.toString;t.exports=r},function(t,e,n){"use strict";function r(t){return null==t?!1:o(t)?l.test(u.call(t)):i(t)&&s.test(t)}var o=n(34),i=n(5),s=/^\[object .+?Constructor\]$/,c=Object.prototype,u=Function.prototype.toString,a=c.hasOwnProperty,l=RegExp("^"+u.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){"use strict";var r=n(19),o=n(20),i=n(27),s=i(function(t,e,n){return n?r(t,e,n):o(t,e)});t.exports=s},function(t,e,n){"use strict";function r(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&c(e)&&(i(t)||o(t))&&e||0;for(var n=t.constructor,r=-1,a="function"==typeof n&&n.prototype===t,p=Array(e),f=e>0;++r<e;)p[r]=r+"";for(var v in t)f&&s(v,e)||"constructor"==v&&(a||!l.call(t,v))||p.push(v);return p}var o=n(7),i=n(3),s=n(4),c=n(2),u=n(1),a=Object.prototype,l=a.hasOwnProperty;t.exports=r},function(t,e){"use strict";function n(t){return t}t.exports=n},function(t,e,n){var r,o,i;!function(n,s){o=[],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(void 0,function(){function t(e,n,r){function o(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}var i={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null};r||(r={});for(var s in i)"undefined"!=typeof r[s]?this[s]=r[s]:this[s]=i[s];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var c,u=this,a=!1,l=!1,p=document.createElement("div");p.addEventListener("open",function(t){u.onopen(t)}),p.addEventListener("close",function(t){u.onclose(t)}),p.addEventListener("connecting",function(t){u.onconnecting(t)}),p.addEventListener("message",function(t){u.onmessage(t)}),p.addEventListener("error",function(t){u.onerror(t)}),this.addEventListener=p.addEventListener.bind(p),this.removeEventListener=p.removeEventListener.bind(p),this.dispatchEvent=p.dispatchEvent.bind(p),this.open=function(e){if(c=new WebSocket(u.url,n||[]),e){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else p.dispatchEvent(o("connecting")),this.reconnectAttempts=0;(u.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",u.url);var r=c,i=setTimeout(function(){(u.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",u.url),l=!0,r.close(),l=!1},u.timeoutInterval);c.onopen=function(n){clearTimeout(i),(u.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onopen",u.url),u.protocol=c.protocol,u.readyState=WebSocket.OPEN,u.reconnectAttempts=0;var r=o("open");r.isReconnect=e,e=!1,p.dispatchEvent(r)},c.onclose=function(n){if(clearTimeout(i),c=null,a)u.readyState=WebSocket.CLOSED,p.dispatchEvent(o("close"));else{u.readyState=WebSocket.CONNECTING;var r=o("connecting");r.code=n.code,r.reason=n.reason,r.wasClean=n.wasClean,p.dispatchEvent(r),e||l||((u.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onclose",u.url),p.dispatchEvent(o("close")));var i=u.reconnectInterval*Math.pow(u.reconnectDecay,u.reconnectAttempts);setTimeout(function(){u.reconnectAttempts++,u.open(!0)},i>u.maxReconnectInterval?u.maxReconnectInterval:i)}},c.onmessage=function(e){(u.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",u.url,e.data);var n=o("message");n.data=e.data,p.dispatchEvent(n)},c.onerror=function(e){(u.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onerror",u.url,e),p.dispatchEvent(o("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(e){if(c)return(u.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","send",u.url,e),c.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(t,e){"undefined"==typeof t&&(t=1e3),a=!0,c&&c.close(t,e)},this.refresh=function(){c&&c.close()}}return"WebSocket"in window?(t.prototype.onopen=function(t){},t.prototype.onclose=function(t){},t.prototype.onconnecting=function(t){},t.prototype.onmessage=function(t){},t.prototype.onerror=function(t){},t.debugAll=!1,t.CONNECTING=WebSocket.CONNECTING,t.OPEN=WebSocket.OPEN,t.CLOSING=WebSocket.CLOSING,t.CLOSED=WebSocket.CLOSED,t):void 0})},function(t,e,n){/**
	 * @fileOverview
	 * @name relay.js
	 * @author Gavin Coombes
	 * @license MIT
	 * @version 0.2.0
	 * @module relay
	 *
	 * A brocket relay using the EventEmitter interface
	 *
	 */
"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){t&&0===t.readyState?window.setTimeout(o.bind(null,t,e),e):t&&1===t.readyState?t.close():v("Socket does not exist or is closed.")}function i(t,e,n){return f.has(t,e)||(t[e]=[]),t[e]=[].concat(r(t[e]),[n]),t}function s(t,e){t&&t.length&&t.forEach(function(t){return t(e)})}function c(t,e){var n=t+"/pub/"+e,r=t+"/sub/"+e;return[n,r]}var u=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,c=t[Symbol.iterator]();!(r=(s=c.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(16),l=n(39),p=n(41),f=(a.EventEmitter,p),v=p.log,d="|",h={debug:!1,automaticOpen:!1,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null,binaryType:"blob"},b={baseAddr:void 0,channel:"dendrite",appID:void 0,userID:void 0,connID:void 0,pulse:3e4,recvMode:1,sendMode:1,conchMode:1,ignoreEcho:!1,wrapping:!0,webSocketOptions:h},g=function(){var t=Object.create(new a.EventEmitter);return t.$type="RelayModule",t}(),m=Object.create(g);m.init=function(t){var e=this;e.opts=f.defaults({},t,b),e.recvMode=f.prop(e.opts.recvMode),e.sendMode=f.prop(e.opts.sendMode),e.conchMode=f.prop(e.opts.conchMode),e._channel=f.prop(e.opts.channel);var n=c(e.opts.baseAddr,e._channel()),r=u(n,2);e.pubAddr=r[0],e.subAddr=r[1],e.message$=null,e.opts.connID=f._s6(),e.tag=[e.opts.appID,e.opts.userID,e.opts.connID].join(d),e.subscriptions=Object.create({}),e.opts.automaticOpen&&e.connect()},m.channel=function(t){var e=this;if(arguments.length){e._channel(t);var n=c(e.opts.baseAddr,e._channel()),r=u(n,2);e.pubAddr=r[0],e.subAddr=r[1],e.reconnect()}return e._channel()},m.connect=function(){var t=this;t._connect(l,t.opts.webSocketOptions)},m._connect=function(t,e){var n=this,r=new t(n.pubAddr,null,e);r.addEventListener("open",function(t){return n.emit("pub/open")}),r.addEventListener("close",function(){return n.emit("pub/close")}),r.addEventListener("error",function(t){return n.emit("pub/error",t)}),r.addEventListener("error",function(t){return n.emit("error",t)}),r.open(),n.pubWS=r,n.subWS=new t(n.subAddr,null,e),n.subWS.addEventListener("open",function(t){return n.emit("sub/open")}),n.subWS.addEventListener("open",function(t){return v("Opening "+n.subAddr)}),n.subWS.addEventListener("close",function(t){return n.emit("sub/close",t)}),n.subWS.addEventListener("error",function(t){return n.emit("sub/error",t)}),n.subWS.addEventListener("error",function(t){return n.emit("error",t)}),n.subWS.addEventListener("message",function(t){return n.receive(t)}),n.subWS.open(),n.emit("beat","Connecting")},m.inject_rx=function(t){var e=this,n=t.Observable.fromEvent(e,"receive"),r=new t.BehaviorSubject;n.subscribe(r),e.message$=r},m.reconnect=function(){var t=this;t.pubWS&&t.pubWS.close(),t.subWS&&t.subWS.close(),t.connect()},m.receive=function(t){var e=this;if(!(e.recvMode<1)){var n,r;if(e.opts.wrapping){var o=e.deserialise(t.data),i=e.unwrap(o);n=i.tag,r=i.payload}else{var s=e.deserialise(t.data);n=s.tag,r=s.payload}var c=n.split(d),a=u(c,3),l=(a[0],a[1],a[2]);if(e.opts.ignoreEcho&&e.opts.connID===l)return void v("Echo ignored. connID: "+e.opts.connID);var p={tag:n,payload:r};e.broadcast(p),e.emit("receive",p)}},m.dispatch=function(t){var e=this,n=void 0;if(!(e.sendMode<1)){if(e.opts.wrapping){var r=e.wrap(t);n=e.serialise(r)}else n=e.serialise(t);1===e.pubWS.readyState?(e.emit("dispatch",t),e.pubWS.send(n)):console.warn("Websocket is not open! Message dropped is ",t)}},m.subscribe=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var o=n[0],s=n[1];if(!s){var c=["global",o];o=c[0],s=c[1]}t.subscriptions=i(t.subscriptions,o,s)},m.dispatchStream=function(t){var e=self.dispatch.bind(self);t.subscribe(e)},m.broadcast=function(t){var e=this,n=e.subscriptions,r=t.tag,o=t.payload;s(n.global,t),s(n[r],o),e.emit("broadcast",t)},m.destroy=function(t){var e=this;t=t||100,o(e.pubWS,t),o(e.subWS,t)},m.wrap=function(t){var e=this,n={tag:e.tag,payload:t};return n},m.unwrap=function(t){var e=(t.tag,t.payload);return e},m.serialise=function(t){return JSON.stringify(t)},m.deserialise=function(t){var e=void 0;if(f.isString(t))e=JSON.parse(t);else{if(!f.isObject(t))throw new Error("I don't even know what he is!? "+t);e=t}return e},t.exports=m},function(t,e,n){/**
	 * @fileOverview
	 * @name utility.js<relay>
	 * @author Gavin Coombes
	 * @license BSD-3-Clause
	 *
	 * Local util script just inlines functions from dpaw-brocket-utility and lodash
	 */
"use strict";function r(t){var e=function(e){return arguments.length&&(t=e),t};return e.toJSON=function(){return t},e}function o(){return Math.floor(16777216*(1+Math.random())).toString(16).substring(1)}var i=function(){},s=Function.prototype.bind.call(console.log,console);i.prop=r,i.isObject=n(1),i.isString=n(11),i.has=n(13),i.defaults=n(12),t.exports={prop:r,log:s,_s6:o,has:n(13),defaults:n(12),isObject:n(1),isString:n(11)}},function(t,e,n){/**
	 * @fileOverview
	 * @name export.js
	 * @author Gavin Coombes
	 * @license
	 */
"use strict";function r(t,e){s(t),c(e);var n={bounds:t.getBounds(),features:e};return n}function o(t){u(t);var e={base:{bounds:i(t.bounds),projection:""},tileLayers:{},featureLayers:{feature_abc:{id:"feature_abc",data_source:"$ref",path:["root","data","feature_abc"],layer_name:"referral",provider:"ogr"}},layout:{container:{width:null,height:null,orientation:null},layers:["feature_abc"],widgets:[]},widgets:{},data:{feature_abc:t.features}};return e}function i(t){var e={minLon:t._southWest.lng,minLat:t._southWest.lat,maxLon:t._northEast.lng,maxLat:t._northEast.lat};return e}function s(t){if(null==t||"function"!=typeof t.getBounds)throw new TypeError("map object must have getBounds method")}function c(t){if(null==t||"object"!=typeof t)throw TypeError("geojson object must be valid")}function u(t,e){if(null==t||"object"!=typeof t)throw TypeError((e?e:"value")+" object must be valid")}var a=n(15),l={baseAddr:"wss://brocket.dpaw.wa.gov.au",channel:"dendrite",appID:"prs",userID:"gavinco"},p={init:function(t){var e=this,n=Object.create(a);n.init(t||l),n.on("message",function(t){return console.log("monorail.plugin received msg",t)}),n.on("dispatch",function(t){return console.log("monorail.plugin dispatched msg",t)}),n.subscribe(function(t){return console.log("Monorail.plugin: Subscriber received msg ",t)}),n.connect(),e.relay=n,e.tag=t.appID+":map:transport_map",e.dispatch=n.dispatch.bind(n)},"export":function(t){var e=r(t),n=o(e),i={tag:self.tag,payload:n};self.dispatch(i)},destroy:function(){var t=this;t.relay.destroy()},_harvest:r,_transform:o};t.exports=p}]);