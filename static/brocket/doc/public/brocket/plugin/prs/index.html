<a id="rocket" href="#top" class="show"></a><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description"/><title>Planning Referral System | Brocket</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Planning Referral System</h1><a id="logo" href="/">Brocket</a><p class="description">Inter-app communication</p></div><div id="nav-menu"><a href="/"><i class="icon-home"> Home</i></a><a href="/archives"><i class="icon-archive"> Archive</i></a><a href="/" class="current"><i class="icon-about"> About</i></a><a href="/atom.xml"><i class="icon-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Planning Referral System</h1><div class="post-content"><h2 id="Overview">Overview</h2><p>The plugin to PRS allows you to export the referral geometry to QGIS.<br>For this to work, you must have the QGIS monorail plugin installed and active.</p>
<h2 id="Usage">Usage</h2><p>From the PRS side, you can export the geometry from your referral to QGIS.</p>
<p>Click “Export via Brocket” in the referral dropdown menu.</p>
<p><img src="./prs-dropdown.png" alt="PRS Referral Dropdown"></p>
<p>At the moment, there is no acknowledgment of the export, though the javascript console will show</p>
<h2 id="Development">Development</h2><p>You can work on the Javascript code for the export plugin by getting the <a href="https://bitbucket.org/dpaw/brocket-prs-plugin" target="_blank" rel="external">source repo</a> from Bitbucket. You will need <a href="https://nodejs.org/" target="_blank" rel="external">nodejs</a> and <a href="https://docs.npmjs.com/getting-started/what-is-npm" target="_blank" rel="external">npm</a>.</p>
<p>Now the source repo is git-based, <code>hg</code> will not work.</p>
<p>Get the repo.<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://bitbucket.org/dpaw/brocket-prs-plugin</span><br><span class="line">$ <span class="built_in">cd</span> brocket-prs-plugin</span><br></pre></td></tr></table></figure></p>
<p>Install dependencies.<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install</span><br></pre></td></tr></table></figure></p>
<p>And if you’re brave, start the test server and browse to <a href="http://localhost:7011" target="_blank" rel="external">http://localhost:7011</a><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm <span class="built_in">test</span></span><br></pre></td></tr></table></figure></p>
<p>The entry point for the source code is <code>./index.js</code> and rest of the code resides in the <code>src</code> directory.<br>The code is written using ES2015 but vanilla javascript will work fine.<br>Modules follow the CommonJS convention of <code>require</code> and <code>module.exports</code> but ES2015 modules will work too.<br>The transpilation, minifiying and dev server setup is managed with <a href="http://webpack.github.io/docs/what-is-webpack.html" target="_blank" rel="external">Webpack</a>.</p>
<h2 id="Testing">Testing</h2><p>Testing with <a href="https://mochajs.org/" target="_blank" rel="external">Mocha</a> and <a href="http://chaijs.com/api/assert/" target="_blank" rel="external">Chai</a></p>
</div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><div class="widget-title">Categories</div></div><div class="widget"><div class="widget-title">Tags</div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title">Recent</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2015/11/04/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/04/welcome/">Welcome to Brocket</a></li></ul></div><div class="widget"><div class="widget-title">Blogroll</div><ul></ul><a href="/brocket/app" title="apps" target="_blank">apps</a><ul></ul><a href="/brocket/plugin" title="plugins" target="_blank">plugins</a><ul></ul><a href="/brocket/lib" title="libraries" target="_blank">libraries</a></div></div></div></div><div id="footer">© <a href="/" rel="nofollow">Brocket.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></body><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"><script>$(document).ready(function() {
  $("img").wrap(function() {
    if ($(this).hasClass('nofancybox')) return;
    return '<a href="' + $(this).attr("src") + '" rel="group" />'});
});</script><script>$(document).ready(function() {
  $("a[href$='.jpg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').fancybox({
   helpers : {
   title: { type: 'inside'}
   },
   afterLoad: function(){
   this.title = this.title + ' ' + $(this.element).find('img').attr('alt');
   }
 });
});
</script></html>